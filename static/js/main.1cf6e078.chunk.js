(this["webpackJsonpimage-retrieval-ui"]=this["webpackJsonpimage-retrieval-ui"]||[]).push([[0],{12:function(e,t,s){},14:function(e,t,s){},15:function(e,t,s){"use strict";s.r(t);var a=s(0),c=s.n(a),r=s(4),n=s.n(r),i=s(7),l=s(2),o=s(6),j=(s(12),s(3));const d="https://e572-169-235-30-91.ngrok-free.app";var b=()=>{const[e,t]=Object(a.useState)("image"),[s,c]=Object(a.useState)(null),[r,n]=Object(a.useState)([]),[i,l]=Object(a.useState)(""),[b,h]=Object(a.useState)([]),[O,m]=Object(a.useState)(null),[u,x]=Object(a.useState)(null),[p,g]=Object(a.useState)(!1),[y,v]=Object(a.useState)({}),S=async e=>{const t={};await Promise.all(e.map((async e=>{try{const s=await fetch("".concat(d).concat(e.path),{headers:{"ngrok-skip-browser-warning":"true"}}),a=await s.blob();t[e.path]=URL.createObjectURL(a)}catch(s){console.warn("Failed to load image:",e.path)}}))),v((e=>Object(o.a)(Object(o.a)({},e),t)))},w=e=>e.map(((e,t)=>Object(j.jsxs)("div",{className:"result",style:{border:"1px solid #ccc",borderRadius:"8px",marginBottom:"1em",padding:"1em"},children:[y[e.path]&&Object(j.jsx)("img",{src:y[e.path],alt:e.caption,style:{maxWidth:400,maxHeight:400,borderRadius:12,marginBottom:"0.5em"}}),Object(j.jsxs)("div",{children:["Rank: ",e.rank]}),Object(j.jsxs)("div",{children:["Caption: ",e.caption]}),Object(j.jsxs)("div",{children:[Object(j.jsx)("strong",{children:"OOD Score:"})," ",e.ood_score.toFixed(2)]})]},t)));return Object(j.jsxs)("div",{children:[Object(j.jsxs)("div",{className:"toggle-container slider-toggle",children:[Object(j.jsx)("span",{className:"toggle-label".concat("image"===e?" active":""),children:"Image"}),Object(j.jsxs)("label",{className:"switch",children:[Object(j.jsx)("input",{type:"checkbox",checked:"text"===e,onChange:()=>t("image"===e?"text":"image")}),Object(j.jsx)("span",{className:"slider"})]}),Object(j.jsx)("span",{className:"toggle-label".concat("text"===e?" active":""),children:"Text"})]}),"image"===e&&Object(j.jsxs)("div",{className:"sensei-card",children:[Object(j.jsx)("h2",{children:"Search by Image"}),Object(j.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),s){g(!0);try{var t;const e=new FormData;e.append("image",s);const a=await fetch("".concat(d,"/search_by_image"),{method:"POST",body:e,headers:{"ngrok-skip-browser-warning":"true"},mode:"cors"}),c=await a.json();n(c.results||[]),m(null!==(t=c.query_ood_score)&&void 0!==t?t:null),await S(c.results||[])}catch(a){alert("Image search failed.")}g(!1)}},children:[Object(j.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{var t;return c((null===(t=e.target.files)||void 0===t?void 0:t[0])||null)}}),Object(j.jsx)("button",{className:"sensei-btn",type:"submit",disabled:p,children:"Upload & Search"})]}),null!==O&&Object(j.jsxs)("div",{style:{margin:"1em 0"},children:[Object(j.jsx)("strong",{children:"Query OOD Score:"})," ",O.toFixed(2)]}),w(r)]}),"text"===e&&Object(j.jsxs)("div",{className:"sensei-card",children:[Object(j.jsx)("h2",{children:"Search by Text"}),Object(j.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),g(!0);try{var t;const e=await fetch("".concat(d,"/search_by_text"),{method:"POST",headers:{"Content-Type":"application/json","ngrok-skip-browser-warning":"true"},body:JSON.stringify({query:i}),mode:"cors"}),s=await e.json();h(s.results||[]),x(null!==(t=s.query_ood_score)&&void 0!==t?t:null),await S(s.results||[])}catch(s){alert("Text search failed.")}g(!1)},children:[Object(j.jsx)("input",{type:"text",value:i,onChange:e=>l(e.target.value),placeholder:"Enter your query..."}),Object(j.jsx)("button",{className:"sensei-btn",type:"submit",disabled:p,children:"Search"})]}),null!==u&&Object(j.jsxs)("div",{style:{margin:"1em 0"},children:[Object(j.jsx)("strong",{children:"Query OOD Score:"})," ",u.toFixed(2)]}),w(b)]})]})};s(14);var h=()=>Object(j.jsxs)(i.a,{children:[Object(j.jsx)("div",{className:"sensei-splash-bg"}),Object(j.jsx)("div",{className:"sensei-splash-overlay"}),Object(j.jsxs)("div",{style:{position:"relative",zIndex:2},children:[Object(j.jsxs)("header",{className:"sensei-header",children:[Object(j.jsx)("span",{role:"img","aria-label":"ninja",children:"\ud83e\udd77"})," Sens-AI-Search",Object(j.jsxs)("div",{className:"sensei-subheader",children:["Find images by text or upload, powered by AI ",Object(j.jsx)("span",{role:"img","aria-label":"spark",children:"\u2728"})]})]}),Object(j.jsx)(l.c,{children:Object(j.jsx)(l.a,{path:"/",element:Object(j.jsx)(b,{})})}),Object(j.jsx)(l.c,{children:Object(j.jsx)(l.a,{path:"/sens-AI-search",element:Object(j.jsx)(b,{})})})]})]});n.a.render(Object(j.jsx)(c.a.StrictMode,{children:Object(j.jsx)(h,{})}),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.1cf6e078.chunk.js.map