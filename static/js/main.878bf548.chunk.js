(this["webpackJsonpimage-retrieval-ui"]=this["webpackJsonpimage-retrieval-ui"]||[]).push([[0],{13:function(e,t,s){},14:function(e,t,s){"use strict";s.r(t);var a=s(0),c=s.n(a),r=s(4),n=s.n(r),i=s(7),l=s(2),o=s(6),d=s(3);const j="https://e572-169-235-30-91.ngrok-free.app";var b=()=>{const[e,t]=Object(a.useState)(null),[s,c]=Object(a.useState)([]),[r,n]=Object(a.useState)(""),[i,l]=Object(a.useState)([]),[b,h]=Object(a.useState)(null),[u,O]=Object(a.useState)(null),[m,p]=Object(a.useState)(!1),[x,g]=Object(a.useState)({}),y=async e=>{const t={};await Promise.all(e.map((async e=>{try{const s=await fetch("".concat(j).concat(e.path),{headers:{"ngrok-skip-browser-warning":"true"}}),a=await s.blob();t[e.path]=URL.createObjectURL(a)}catch(s){console.warn("Failed to load image:",e.path)}}))),g((e=>Object(o.a)(Object(o.a)({},e),t)))},v=e=>e.map(((e,t)=>Object(d.jsxs)("div",{className:"result",style:{border:"1px solid #ccc",borderRadius:"8px",marginBottom:"1em",padding:"1em"},children:[x[e.path]&&Object(d.jsx)("img",{src:x[e.path],alt:e.caption,style:{maxWidth:400,maxHeight:400,borderRadius:12,marginBottom:"0.5em"}}),Object(d.jsxs)("div",{children:["Rank: ",e.rank]}),Object(d.jsxs)("div",{children:["Caption: ",e.caption]}),Object(d.jsxs)("div",{children:[Object(d.jsx)("strong",{children:"OOD Score:"})," ",e.ood_score.toFixed(2)]})]},t)));return Object(d.jsxs)("div",{children:[Object(d.jsxs)("div",{className:"sensei-card",children:[Object(d.jsx)("h2",{children:"Search by Image"}),Object(d.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),e){p(!0);try{var s;const t=new FormData;t.append("image",e);const a=await fetch("".concat(j,"/search_by_image"),{method:"POST",body:t,headers:{"ngrok-skip-browser-warning":"true"},mode:"cors"}),r=await a.json();c(r.results||[]),h(null!==(s=r.query_ood_score)&&void 0!==s?s:null),await y(r.results||[])}catch(a){alert("Image search failed.")}p(!1)}},children:[Object(d.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{var s;return t((null===(s=e.target.files)||void 0===s?void 0:s[0])||null)}}),Object(d.jsx)("button",{className:"sensei-btn",type:"submit",disabled:m,children:"Upload & Search"})]}),null!==b&&Object(d.jsxs)("div",{style:{margin:"1em 0"},children:[Object(d.jsx)("strong",{children:"Query OOD Score:"})," ",b.toFixed(2)]}),v(s)]}),Object(d.jsxs)("div",{className:"sensei-card",children:[Object(d.jsx)("h2",{children:"Search by Text"}),Object(d.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),p(!0);try{var t;const e=await fetch("".concat(j,"/search_by_text"),{method:"POST",headers:{"Content-Type":"application/json","ngrok-skip-browser-warning":"true"},body:JSON.stringify({query:r}),mode:"cors"}),s=await e.json();l(s.results||[]),O(null!==(t=s.query_ood_score)&&void 0!==t?t:null),await y(s.results||[])}catch(s){alert("Text search failed.")}p(!1)},children:[Object(d.jsx)("input",{type:"text",value:r,onChange:e=>n(e.target.value),placeholder:"Enter your query..."}),Object(d.jsx)("button",{className:"sensei-btn",type:"submit",disabled:m,children:"Search"})]}),null!==u&&Object(d.jsxs)("div",{style:{margin:"1em 0"},children:[Object(d.jsx)("strong",{children:"Query OOD Score:"})," ",u.toFixed(2)]}),v(i)]})]})};s(13);var h=()=>Object(d.jsxs)(i.a,{children:[Object(d.jsx)("div",{className:"sensei-splash-bg"}),Object(d.jsx)("div",{className:"sensei-splash-overlay"}),Object(d.jsxs)("div",{style:{position:"relative",zIndex:2},children:[Object(d.jsxs)("header",{className:"sensei-header",children:[Object(d.jsx)("span",{role:"img","aria-label":"ninja",children:"\ud83e\udd77"})," Sens-AI-Search",Object(d.jsxs)("div",{className:"sensei-subheader",children:["Find images by text or upload, powered by AI ",Object(d.jsx)("span",{role:"img","aria-label":"spark",children:"\u2728"})]})]}),Object(d.jsx)(l.c,{children:Object(d.jsx)(l.a,{path:"/",element:Object(d.jsx)(b,{})})}),Object(d.jsx)(l.c,{children:Object(d.jsx)(l.a,{path:"/sens-AI-search",element:Object(d.jsx)(b,{})})})]})]});n.a.render(Object(d.jsx)(c.a.StrictMode,{children:Object(d.jsx)(h,{})}),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.878bf548.chunk.js.map