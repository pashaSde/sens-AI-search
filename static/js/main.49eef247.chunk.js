(this["webpackJsonpimage-retrieval-ui"]=this["webpackJsonpimage-retrieval-ui"]||[]).push([[0],{13:function(e,t,a){},15:function(e,t,a){},16:function(e,t,a){"use strict";a.r(t);var s=a(0),c=a.n(s),i=a(4),n=a.n(i),r=a(7),l=a(2),o=a(6),d=(a(13),a(8)),j=a(3);const b="https://e572-169-235-30-91.ngrok-free.app";var h=()=>{const[e,t]=Object(s.useState)("image"),[a,c]=Object(s.useState)(null),[i,n]=Object(s.useState)([]),[r,l]=Object(s.useState)(""),[h,m]=Object(s.useState)([]),[O,u]=Object(s.useState)(null),[x,p]=Object(s.useState)(null),[g,y]=Object(s.useState)(!1),[v,S]=Object(s.useState)({}),w=async e=>{const t={};await Promise.all(e.map((async e=>{try{const a=await fetch("".concat(b).concat(e.path),{headers:{"ngrok-skip-browser-warning":"true"}}),s=await a.blob();t[e.path]=URL.createObjectURL(s)}catch(a){console.warn("Failed to load image:",e.path)}}))),S((e=>Object(o.a)(Object(o.a)({},e),t)))},f=e=>e.map(((e,t)=>Object(j.jsxs)("div",{className:"result",style:{border:"1px solid #ccc",borderRadius:"8px",marginBottom:"1em",padding:"1em"},children:[v[e.path]&&Object(j.jsx)("img",{src:v[e.path],alt:e.caption,style:{maxWidth:400,maxHeight:400,borderRadius:12,marginBottom:"0.5em"}}),Object(j.jsxs)("div",{children:["Rank: ",e.rank]}),Object(j.jsxs)("div",{children:["Caption: ",e.caption]}),Object(j.jsxs)("div",{children:[Object(j.jsx)("strong",{children:"OOD Score:"})," ",e.ood_score.toFixed(2)]})]},t)));return Object(j.jsxs)("div",{children:[Object(j.jsxs)("div",{className:"toggle-container slider-toggle",children:[Object(j.jsx)("span",{className:"toggle-label".concat("image"===e?" active":""),children:"Image"}),Object(j.jsxs)("label",{className:"switch",children:[Object(j.jsx)("input",{type:"checkbox",checked:"text"===e,onChange:()=>t("image"===e?"text":"image")}),Object(j.jsx)("span",{className:"slider"})]}),Object(j.jsx)("span",{className:"toggle-label".concat("text"===e?" active":""),children:"Text"})]}),"image"===e&&Object(j.jsxs)("div",{className:"sensei-card",children:[Object(j.jsx)("h2",{children:"Search by Image"}),Object(j.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),a){y(!0);try{var t;const e=new FormData;e.append("image",a);const s=await fetch("".concat(b,"/search_by_image"),{method:"POST",body:e,headers:{"ngrok-skip-browser-warning":"true"},mode:"cors"}),c=await s.json();n(c.results||[]),u(null!==(t=c.query_ood_score)&&void 0!==t?t:null),await w(c.results||[])}catch(s){alert("Image search failed.")}y(!1)}},children:[Object(j.jsxs)("label",{htmlFor:"image-upload",className:"file-upload-label",children:[Object(d.a)({size:28}),a?Object(j.jsx)("span",{className:"file-placeholder",children:a.name}):Object(j.jsx)("span",{className:"file-placeholder",children:"Upload image"})]}),Object(j.jsx)("input",{id:"image-upload",type:"file",accept:"image/*",style:{display:"none"},onChange:e=>{var t;return c((null===(t=e.target.files)||void 0===t?void 0:t[0])||null)}}),Object(j.jsx)("button",{className:"sensei-btn",type:"submit",disabled:g,children:"Upload & Search"})]}),null!==O&&Object(j.jsxs)("div",{style:{margin:"1em 0"},children:[Object(j.jsx)("strong",{children:"Query OOD Score:"})," ",O.toFixed(2)]}),f(i)]}),"text"===e&&Object(j.jsxs)("div",{className:"sensei-card",children:[Object(j.jsx)("h2",{children:"Search by Text"}),Object(j.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),y(!0);try{var t;const e=await fetch("".concat(b,"/search_by_text"),{method:"POST",headers:{"Content-Type":"application/json","ngrok-skip-browser-warning":"true"},body:JSON.stringify({query:r}),mode:"cors"}),a=await e.json();m(a.results||[]),p(null!==(t=a.query_ood_score)&&void 0!==t?t:null),await w(a.results||[])}catch(a){alert("Text search failed.")}y(!1)},children:[Object(j.jsx)("input",{type:"text",value:r,onChange:e=>l(e.target.value),placeholder:"Enter your query..."}),Object(j.jsx)("button",{className:"sensei-btn",type:"submit",disabled:g,children:"Search"})]}),null!==x&&Object(j.jsxs)("div",{style:{margin:"1em 0"},children:[Object(j.jsx)("strong",{children:"Query OOD Score:"})," ",x.toFixed(2)]}),f(h)]})]})};a(15);var m=()=>Object(j.jsxs)(r.a,{children:[Object(j.jsx)("div",{className:"sensei-splash-bg"}),Object(j.jsx)("div",{className:"sensei-splash-overlay"}),Object(j.jsxs)("div",{style:{position:"relative",zIndex:2},children:[Object(j.jsxs)("header",{className:"sensei-header",children:[Object(j.jsx)("span",{role:"img","aria-label":"ninja",children:"\ud83e\udd77"})," Sens-AI-Search",Object(j.jsxs)("div",{className:"sensei-subheader",children:["Find images by text or upload, powered by AI ",Object(j.jsx)("span",{role:"img","aria-label":"spark",children:"\u2728"})]})]}),Object(j.jsx)(l.c,{children:Object(j.jsx)(l.a,{path:"/",element:Object(j.jsx)(h,{})})}),Object(j.jsx)(l.c,{children:Object(j.jsx)(l.a,{path:"/sens-AI-search",element:Object(j.jsx)(h,{})})})]})]});n.a.render(Object(j.jsx)(c.a.StrictMode,{children:Object(j.jsx)(m,{})}),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.49eef247.chunk.js.map